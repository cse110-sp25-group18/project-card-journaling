name: HTML Validation

on:
  pull_request:
    branches: [ "main" ]
  push:
    branches: [ "Max/automate-validator" ]

jobs:
  validate-html:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'    

    - name: Install W3C HTML validator
      run: npm install -g html-validator-cli

    - name: Create validation directory
      run: mkdir -p validation-results
      
    - name: Validate HTML files with W3C
      run: |
        for file in $(find . -name "*.html"); do
          echo "Validating $file..."
          html-validator --file=$file --format=text --verbose > validation-results/$(basename $file).report.txt || true
        done
    
    - name: Upload validation results
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: w3c-html-validation-report
        path: validation-results